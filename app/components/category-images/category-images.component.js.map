{"version":3,"file":"category-images.component.js","sourceRoot":"","sources":["category-images.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAsBA;gBAKI,iCACY,cAA6B,EAC3B,OAAe,EACf,YAAyB,EACzB,mBAAsC;oBAHxC,mBAAc,GAAd,cAAc,CAAe;oBAC3B,YAAO,GAAP,OAAO,CAAQ;oBACf,iBAAY,GAAZ,YAAY,CAAa;oBACzB,wBAAmB,GAAnB,mBAAmB,CAAmB;oBARpD,WAAM,GAAY,EAAE,CAAC;gBASjB,CAAC;gBAIL,iDAAe,GAAf;oBACI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC;oBAClD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;oBACnC,IAAI,CAAC,mBAAmB,CAAC,aAAa,EAAE,CAAC;gBAC7C,CAAC;gBAEH,8CAAY,GAAZ,UAAa,IAAY;oBACvB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;oBACvB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBACjE,CAAC;gBACC,6CAAW,GAAX,UAAY,UAAkB;oBAA9B,iBAaC;oBAZG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACzB,IAAI,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAErC,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;yBAC5D,IAAI,CAAC,UAAC,MAAM;wBACT,KAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,KAAK;4BACnC,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;4BACzB,MAAM,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC;wBAC3B,CAAC,CAAC,CAAA;wBAEF,KAAI,CAAC,cAAc,EAAE,CAAC;oBAC1B,CAAC,CAAC,CAAC;gBACX,CAAC;gBAEO,gDAAc,GAAtB;oBACI,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gBAC9B,CAAC;gBA7BD;oBAAC,gBAAS,CAAC,0CAAmB,CAAC;;qFAAA;gBArBnC;oBAAC,gBAAS,CAAC;wBACP,QAAQ,EAAE,YAAY;wBACtB,QAAQ,EAAE,QAAQ;wBAClB,UAAU,EAAE,CAAC,yCAAkB,EAAE,oCAAgB,EAAE,0CAAmB,CAAC;wBACvE,SAAS,EAAE,CAAC,cAAO,CAAC,8BAAa,EAAE,EAAE,QAAQ,EAAE,8BAAa,EAAE,CAAC,EAAE,qBAAc,CAAC;wBAChF,WAAW,EAAE,gCAAgC;wBAC7C,SAAS,EAAE,CAAC,+BAA+B,CAAC;qBAC/C,CAAC;;2CAAA;gBA4CF,8BAAC;YAAD,CAAC,AA1CD,IA0CC;YA1CD,6DA0CC,CAAA","sourcesContent":["import {Component, OnInit, provide, AfterViewInit, ViewChild, ChangeDetectorRef} from 'angular2/core';\r\nimport { Router, RouteParams } from 'angular2/router';\r\nimport {Http, Response, Headers, HTTP_BINDINGS, HTTP_PROVIDERS} from 'angular2/http';\r\nimport 'rxjs/Rx';\r\n\r\nimport {Image} from '../../image';\r\nimport {Page} from '../../page';\r\nimport {Category} from '../../category';\r\nimport { ImagesService } from '../../services/images.service';\r\nimport {ImageTileComponent} from '../image-tile/image-tile.component';\r\nimport {SpinnerComponent} from '../spinner/spinner.component';\r\nimport {PaginationComponent} from '../pagination/pagination.component';\r\n\r\n@Component({\r\n    moduleId: __moduleName,\r\n    selector: 'images',\r\n    directives: [ImageTileComponent, SpinnerComponent, PaginationComponent],\r\n    providers: [provide(ImagesService, { useClass: ImagesService }), HTTP_PROVIDERS],\r\n    templateUrl: 'category-images.component.html',\r\n    styleUrls: ['category-images.component.css'],\r\n})\r\n\r\nexport class CategoryImagesComponent  {\r\n    images: Image[] = [];\r\n    public isRequesting: boolean;\r\n    topic: string;\r\n    public page: Page;\r\n    constructor(\r\n        private _imagesService: ImagesService\r\n        , private _router: Router\r\n        , private _routeParams: RouteParams\r\n        , private _changeDetectionRef: ChangeDetectorRef\r\n    ) { }\r\n\r\n    @ViewChild(PaginationComponent)\r\n    private _paginationComponent: PaginationComponent;\r\n    ngAfterViewInit() {\r\n        this.page = this._paginationComponent.currentPage;\r\n        this.fetchImages(this.page.number);\r\n        this._changeDetectionRef.detectChanges();\r\n    }\r\n\r\n  onPageChange(page:boolean){\r\n    console.log(\"Changed\");\r\n    this.fetchImages(this._paginationComponent.currentPage.number);\r\n  }\r\n    fetchImages(pageNumber: number) {\r\n        this.isRequesting = true;\r\n        let id = this._routeParams.get(\"id\");\r\n\r\n        this._imagesService.getImagesByCategory(id, { page: pageNumber })\r\n            .then((result) => {\r\n                this.images = result.data.filter((image) => {\r\n                    this.topic = image.topic;\r\n                    return !image.is_album;\r\n                })\r\n\r\n                this.stopRefreshing();\r\n            });\r\n    }\r\n\r\n    private stopRefreshing() {\r\n        this.isRequesting = false;\r\n    }\r\n}\r\n"]}